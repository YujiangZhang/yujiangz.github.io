import{d as M,o as c,c as h,a,u as x,r as S,f as C,e as p,t as f,h as D,F as _,i as N,j as E,g as V,w as B,E as W,k as j,T as R,l as L,b as F,m as I,n as Y}from"./index-376d88e3.js";import{D as z}from"./DirIcon-56fd97d2.js";import{g as n}from"./index-9e2476f3.js";function H(){const o=["#f07c82","#ee3f4d","#de1c31","#ed556a","#f03752","#e77c8e","#ec9bad","#eeb8c3","#c08eaf","#806d9e","#525288","#61649f","#2b73af","#2376b7","#5698c3","#1772b4","#1781b5","#12aa9c","#45b787","#ffd111","#feba07","#fca106","#f26b1f","#f86b1d"];return o[~~(Math.random()*o.length)]}const O=["view-box"],T=["d"],A=M({__name:"RandomSvg",props:{viewBoxW:{type:Number,default:200},viewBoxH:{type:Number,default:200}},setup(o){const{viewBoxW:s,viewBoxH:m}=o,r=((d=s,l=m)=>{let e=[],u=~~(Math.random()*3)+2;for(let y=0;y<u;y++){const v=Math.floor(Math.random()*d),t=Math.floor(Math.random()*l),w=Math.floor(Math.random()*d),b=Math.floor(Math.random()*l),k=Math.floor(Math.random()*180),i=Math.floor(Math.random()*2),$=Math.floor(Math.random()*2);e.push(`M ${v} ${t} a ${w} ${b} ${k} ${i} ${$} ${v} ${t}`)}return e.join(" ")})();return(d,l)=>(c(),h("svg",{"view-box":`0 0 ${o.viewBoxW} ${o.viewBoxH}`,stroke:"current","stroke-width":"currentWidth",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor","stroke-width":"currentWidth",d:x(r)},null,8,T)],8,O))}}),P={class:"p-4 text-2xl font-bold"},q={class:"flex flex-col p-2 text-xs text-right opacity-50"},G={class:"w-full max-h-[100%-2rem] pl-2 pr-4 my-4 text-sm basis-7/12 scrollbar"},J=["onClick"],K={key:0,class:"absolute inset-0 flex h-full overflow-hidden bg-gray-100 dark:bg-gray-700"},Q={class:"inline-block w-2 text-xs tracking-tighter"},U=M({__name:"DirCard",props:{dir:{type:Object,required:!0}},setup(o){const s=H(),m={backgroundColor:s+"00"},g={borderColor:"#ffffff55",borderWidth:"3px"},r={color:s+"aa"},d={color:s+""},l={backgroundColor:s+"aa"},e=S(),u=t=>{n.set(t.firstElementChild,{x:"100%",opacity:0}),n.set(t.lastElementChild,{x:"100%"}),n.set(t,{opacity:0})},y=t=>{n.to(t.firstElementChild,{x:"0%",opacity:1,duration:.3,delay:.2,ease:"power2.out"}),n.to(t.lastElementChild,{x:"0%",duration:.3,ease:"power2.out"}),n.to(t,{opacity:1,duration:.4,ease:"power2.out"})},v=(t,w)=>{n.to(t.firstElementChild,{x:"-100%",opacity:0,duration:.1,ease:"power2.in"}),n.to(t.lastElementChild,{x:"-100%",duration:.3,delay:.1,ease:"power2.in"}),n.to(t,{duration:.4,opacity:0,ease:"power2.in",onComplete:w})};return(t,w)=>{const b=C("RouterLink"),k=C("DirCard",!0);return c(),h("div",{class:"flex overflow-hidden rounded-lg shadow-lg glass",style:g},[a("div",{class:"relative flex flex-col justify-between basis-5/12",style:m},[p(A,{class:"absolute -z-[1] top-0 left-0 w-full h-full stroke-[.5em]",style:r}),a("h2",P,f(o.dir.name),1),a("div",q,[a("p",null,f(o.dir.children.length)+" 份文件",1),a("p",null,"更新于 "+f(x(D)(o.dir.mtime).format("YY/MM/DD")),1),a("p",null,"创建于 "+f(x(D)(o.dir.birthtime).format("YY/MM/DD")),1)])]),a("ul",G,[(c(!0),h(_,null,N(o.dir.children,i=>(c(),h("li",{key:i.name},[i.type==="dir"?(c(),h("div",{key:0,class:"p-2 truncate rounded-md cursor-pointer hover:bg-opacity-40 hover:bg-white",onClick:$=>e.value=i},[p(x(z),{class:"inline-block w-4 align-text-top stroke-2",style:d}),E(" "+f(i.name),1)],8,J)):(c(),V(b,{key:1,to:i.url,class:"block p-2 truncate rounded-md cursor-pointer hover:bg-opacity-40 hover:bg-white"},{default:B(()=>[a("span",{class:"inline-block w-2 mx-1 h-[3px] mb-[.2em] rounded-full",style:l}),E(" "+f(i.name),1)]),_:2},1032,["to"]))]))),128))]),p(R,{onBeforeEnter:u,onEnter:y,onLeave:v},{default:B(()=>[e.value?(c(),h("div",K,[a("div",{class:"w-6 flex-shrink-0 flex-grow-0 h-full pt-2 text-red-300 hover:text-red-400 cursor-pointer [writing-mode:horizontal-rl] text-center",onClick:w[0]||(w[0]=i=>e.value=null)},[p(x(W),{class:"w-full rotate-180"}),a("span",Q,f(o.dir.name),1)]),p(k,{dir:e.value,class:"flex-grow h-full"},null,8,["dir"])])):j("",!0)]),_:1})])}}}),X=I('<div class="grid none"><span class="row-span-1"></span><span class="row-span-2"></span><span class="row-span-3"></span><span class="row-span-4"></span><span class="row-span-5"></span></div>',1),oe=M({__name:"DocsCatalog",setup(o){const s=[],m={name:"其他",children:[],type:"dir",mtime:Date.now(),birthtime:Date.now()};L.children.forEach(r=>{typeof r.children<"u"?s.push(r):m.children.push(r)}),s.push(m);const g=S(null);return F(()=>{var l;const r=(l=g.value)==null?void 0:l.children;if(!r)return;const d=r.length;for(let e=0;e<d;e++){const u=r[e];n.set(u,{opacity:0,y:20}),n.to(u,{opacity:1,y:0,duration:.4,delay:e*.1,ease:"power2.out"})}}),(r,d)=>{const l=C("RouterView");return c(),h(_,null,[X,a("div",{tag:"div",class:"grid grid-flow-row-dense grid-cols-1 gap-6 p-4 sm:grid-cols-2 lg:grid-cols-3 auto-rows-auto",ref_key:"Container",ref:g},[(c(),h(_,null,N(s,(e,u)=>p(U,{dir:e,key:u,class:Y([`row-span-${Math.ceil(e.children.length/5)}`,"shadow-lg"])},null,8,["dir","class"])),64))],512),p(l)],64)}}});export{oe as default};
