import{d as k,o as d,c as p,a as t,u as s,t as j,r as S,i as b,j as M,n as w,k as $,l as m,m as D,F as _,q as W,e as g,h as B,w as E,E as I,T as L,s as A,b as F,f as Y,v as z}from"./index-bcef8f40.js";import{D as H}from"./DirIcon-f326a208.js";import{g as f}from"./index-9e2476f3.js";import{A as O}from"./AppBg-6a7bfc45.js";function T(){const l=["#f07c82","#ee3f4d","#de1c31","#ed556a","#f03752","#e77c8e","#ec9bad","#eeb8c3","#c08eaf","#806d9e","#525288","#61649f","#2b73af","#2376b7","#5698c3","#1772b4","#1781b5","#12aa9c","#45b787","#ffd111","#feba07","#fca106","#f26b1f","#f86b1d"];return l[~~(Math.random()*l.length)]}const q=["view-box"],P=["d"],G=k({__name:"RandomSvg",props:{viewBoxW:{type:Number,default:200},viewBoxH:{type:Number,default:200}},setup(l){const{viewBoxW:v,viewBoxH:n}=l,e=((o=v,i=n)=>{let a=[],r=~~(Math.random()*3)+2;for(let h=0;h<r;h++){const x=Math.floor(Math.random()*o),y=Math.floor(Math.random()*i),u=Math.floor(Math.random()*o),C=Math.floor(Math.random()*i),N=Math.floor(Math.random()*180),R=Math.floor(Math.random()*2),V=Math.floor(Math.random()*2);a.push(`M ${x} ${y} a ${u} ${C} ${N} ${R} ${V} ${x} ${y}`)}return a.join(" ")})();return(o,i)=>(d(),p("svg",{"view-box":`0 0 ${l.viewBoxW} ${l.viewBoxH}`,stroke:"current","stroke-width":"currentWidth",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor","stroke-width":"currentWidth",d:s(e)},null,8,P)],8,q))}}),J={class:"p-4 text-2xl font-bold"},K={class:"flex flex-col p-2 text-xs text-right opacity-70"},Q={class:"w-full max-h-[100%-2rem] pl-2 pr-4 my-4 text-sm basis-7/12 scrollbar"},U=["onClick"],X={key:0,class:"absolute inset-0 flex h-full overflow-hidden"},Z={class:"block w-24 text-sm leading-6 truncate origin-bottom-left rotate-90 -translate-y-6"},ee=k({__name:"DirCard",props:{dir:{type:Object,required:!0},color:{type:String,default:""},svg:{type:Boolean,default:!1}},setup(l){const n=j(l.dir),c=T(),e={card:{borderColor:"#ffffff55",borderWidth:"3px"},leftWrapper:{backgroundColor:c+"00"},svg:{color:c+"aa"},dirIcon:{color:c+""},docIcon:{backgroundColor:c+"aa"}},o=S(),i=r=>{f.from(r.firstElementChild,{x:"100%",opacity:0,duration:.3,delay:.2}),f.from(r.lastElementChild,{x:"50%",opacity:0,duration:.2})},a=(r,h)=>{f.to(r.firstElementChild,{x:"-100%",opacity:0,duration:.2}),f.to(r.lastElementChild,{x:"-50%",opacity:0,duration:.2,onComplete:h})};return(r,h)=>{const x=b("RouterLink"),y=b("DirCard",!0);return d(),p("div",{class:"flex overflow-hidden rounded-lg",style:w(e.card)},[t("div",{class:"relative flex flex-col justify-between basis-5/12",style:w(e.leftWrapper)},[l.svg?(d(),M(G,{key:0,class:"absolute -z-[1] top-0 left-0 w-full h-full stroke-[.5em]",style:w(e.svg)},null,8,["style"])):$("",!0),t("h2",J,m(s(n).name),1),t("div",K,[t("p",null,m(s(n).children.length)+" 份文件",1),t("p",null,"更新于 "+m(s(D)(s(n).mtime).format("YY/MM/DD")),1),t("p",null,"创建于 "+m(s(D)(s(n).birthtime).format("YY/MM/DD")),1)])],4),t("ul",Q,[(d(!0),p(_,null,W(s(n).children,u=>(d(),p("li",{key:u.name},[u.type==="dir"?(d(),p("div",{key:0,class:"p-2 truncate rounded-md cursor-pointer hover:bg-opacity-40 hover:bg-white",onClick:C=>o.value=u},[g(s(H),{class:"inline-block w-4 align-text-top stroke-2",style:w(e.dirIcon)},null,8,["style"]),B(" "+m(u.name),1)],8,U)):(d(),M(x,{key:1,to:u.url,class:"block p-2 truncate rounded-md cursor-pointer hover:bg-opacity-40 hover:bg-white"},{default:E(()=>[t("span",{class:"inline-block w-2 mx-1 h-[3px] mb-[.2em] rounded-full",style:w(e.docIcon)},null,4),B(" "+m(u.name),1)]),_:2},1032,["to"]))]))),128))]),g(L,{onEnter:i,onLeave:a},{default:E(()=>[o.value?(d(),p("div",X,[t("div",{class:"flex-grow-0 flex-shrink-0 h-full pt-2 overflow-hidden text-red-300 cursor-pointer bg-slate-300 dark:bg-slate-700 basis-6 hover:text-red-400",onClick:h[0]||(h[0]=u=>o.value=null)},[t("span",null,[g(s(I),{class:"w-full rotate-180"})]),t("span",Z,m(s(n).name),1)]),g(y,{dir:o.value,class:"flex-grow h-full rounded-l-none bg-slate-300 dark:bg-slate-700"},null,8,["dir"])])):$("",!0)]),_:1})],4)}}}),te=Y('<div class="grid none"><span class="row-span-1"></span><span class="row-span-2"></span><span class="row-span-3"></span><span class="row-span-4"></span><span class="row-span-5"></span></div>',1),se=k({__name:"DocsCatalog",setup(l){const v=[],n={name:"未分类",children:[],type:"dir",mtime:Date.now(),birthtime:Date.now()};A.children.forEach(e=>{typeof e.children<"u"?v.push(e):n.children.push(e)}),v.push(n);const c=S(null);return F(()=>{var i;const e=(i=c.value)==null?void 0:i.children;if(!e)return;f.set(c.value,{overflow:"hidden"}),f.set(e,{opacity:0,y:30});const o=e.length;for(let a=0;a<o;a++){const r=e[a];f.to(r,{opacity:1,y:0,duration:.3,delay:a*.15,ease:"power2.out"})}f.to(c.value,{overflow:"auto",delay:o*.15})}),(e,o)=>{const i=b("RouterView");return d(),p(_,null,[te,g(O),t("div",{tag:"div",class:"grid min-h-screen grid-flow-row-dense grid-cols-1 gap-6 p-4 sm:grid-cols-2 lg:grid-cols-3 auto-rows-auto pt-[60px]",ref_key:"Container",ref:c},[(d(),p(_,null,W(v,(a,r)=>g(ee,{dir:a,svg:!0,key:r,class:z([`row-span-${Math.ceil(a.children.length/3)}`,"shadow-lg"])},null,8,["dir","class"])),64))],512),g(i)],64)}}});export{se as default};
