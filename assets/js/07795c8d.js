import{d as $,o as a,c,a as e,u as h,p as Y,r as I,m as D,n as E,q as g,l as S,t as _,v as j,F as k,j as C,e as x,k as y,w as b,E as A,T as L,g as v,x as T,s as M,b as R,y as V,z,f as F,A as H}from"./bc76d863.js";import{D as q}from"./0eecb1f7.js";function P(){const p=["#f07c82","#ee3f4d","#de1c31","#ed556a","#f03752","#e77c8e","#ec9bad","#eeb8c3","#c08eaf","#806d9e","#525288","#61649f","#2b73af","#2376b7","#5698c3","#1772b4","#1781b5","#12aa9c","#45b787","#ffd111","#feba07","#fca106","#f26b1f","#f86b1d"];return p[~~(Math.random()*p.length)]}const U=["view-box"],G=["d"],J=$({__name:"RandomSvg",props:{viewBoxW:{type:Number,default:200},viewBoxH:{type:Number,default:200}},setup(p){const{viewBoxW:w,viewBoxH:i}=p,o=((r=w,d=i)=>{let s=[],n=~~(Math.random()*3)+2;for(let t=0;t<n;t++){const l=Math.floor(Math.random()*r),u=Math.floor(Math.random()*d),m=Math.floor(Math.random()*r),B=Math.floor(Math.random()*d),W=Math.floor(Math.random()*180),N=Math.floor(Math.random()*2),O=Math.floor(Math.random()*2);s.push(`M ${l} ${u} a ${m} ${B} ${W} ${N} ${O} ${l} ${u}`)}return s.join(" ")})();return(r,d)=>(a(),c("svg",{"view-box":`0 0 ${p.viewBoxW} ${p.viewBoxH}`,stroke:"current","stroke-width":"currentWidth",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor","stroke-width":"currentWidth",d:h(o)},null,8,G)],8,U))}}),K={class:"p-4 text-2xl font-bold"},Q={class:"flex flex-col p-2 text-xs text-right opacity-70"},X={class:"w-full max-h-[100%-2rem] pl-2 pr-4 my-4 text-sm basis-7/12 scrollbar"},Z=["onClick"],ee={key:0,class:"absolute inset-0 flex h-full overflow-hidden"},te={class:"block w-24 text-sm leading-6 truncate origin-bottom-left rotate-90 -translate-y-6"},oe=$({__name:"DirCard",props:{dir:{type:Object,required:!0},color:{type:String,default:""},svg:{type:Boolean,default:!1}},setup(p){const i=Y(p.dir),f=P(),o={card:{borderColor:"#ffffff55",borderWidth:"3px"},leftWrapper:{backgroundColor:f+"00"},svg:{color:f+"aa"},dirIcon:{color:f+""},docIcon:{backgroundColor:f+"aa"}},r=I(),d=n=>{v.from(n.firstElementChild,{x:"100%",opacity:0,duration:.3,delay:.2}),v.from(n.lastElementChild,{x:"50%",opacity:0,duration:.2})},s=(n,t)=>{v.to(n.firstElementChild,{x:"-100%",opacity:0,duration:.2}),v.to(n.lastElementChild,{x:"-50%",opacity:0,duration:.2,onComplete:t})};return(n,t)=>{const l=D("RouterLink"),u=D("DirCard",!0);return a(),c("div",{class:"flex overflow-hidden rounded-lg",style:g(o.card)},[e("div",{class:"relative flex flex-col justify-between basis-5/12",style:g(o.leftWrapper)},[p.svg?(a(),E(J,{key:0,class:"absolute -z-[1] top-0 left-0 w-full h-full stroke-[.5em]",style:g(o.svg)},null,8,["style"])):S("",!0),e("h2",K,_(h(i).name),1),e("div",Q,[e("p",null,_(h(i).children.length)+" 份文件",1),e("p",null,"更新于 "+_(h(j)(h(i).mtime).format("YY/MM/DD")),1),e("p",null,"创建于 "+_(h(j)(h(i).birthtime).format("YY/MM/DD")),1)])],4),e("ul",X,[(a(!0),c(k,null,C(h(i).children,m=>(a(),c("li",{key:m.name},[m.type==="dir"?(a(),c("div",{key:0,class:"p-2 truncate rounded-md cursor-pointer hover:bg-white/40",onClick:B=>r.value=m},[x(h(q),{class:"inline-block w-4 align-text-top stroke-2",style:g(o.dirIcon)},null,8,["style"]),y(" "+_(m.name),1)],8,Z)):(a(),E(l,{key:1,to:m.url,class:"block p-2 truncate rounded-md cursor-pointer hover:bg-white/40"},{default:b(()=>[e("span",{class:"inline-block w-2 mx-1 h-[3px] mb-[.2em] rounded-full",style:g(o.docIcon)},null,4),y(" "+_(m.name),1)]),_:2},1032,["to"]))]))),128))]),x(L,{onEnter:d,onLeave:s},{default:b(()=>[r.value?(a(),c("div",ee,[e("div",{class:"flex-grow-0 flex-shrink-0 h-full pt-2 overflow-hidden text-red-300 cursor-pointer bg-slate-300 dark:bg-slate-700 basis-6 hover:text-red-400",onClick:t[0]||(t[0]=m=>r.value=null)},[e("span",null,[x(h(A),{class:"w-full rotate-180"})]),e("span",te,_(h(i).name),1)]),x(u,{dir:r.value,class:"flex-grow h-full rounded-l-none bg-slate-300 dark:bg-slate-700"},null,8,["dir"])])):S("",!0)]),_:1})],4)}}}),se={class:"flex-1 p-4"},ne=e("h2",{class:"py-2 text-lg"},"最近更新",-1),le={class:"flex-1 pl-4 list-decimal"},ae={class:"truncate grow-1"},re={class:"text-xs shrink-0 opacity-70"},ce={key:0,class:"flex flex-col flex-1 p-4"},ie=e("h2",{class:"py-2 text-lg"}," 最近阅读 ",-1),de={class:"flex-1"},ue={class:"truncate grow-1"},he={key:1,class:"flex-col flex-1 hidden p-4 sm:flex"},fe=e("h2",{class:"py-2 text-lg"},"提示",-1),pe={class:"flex flex-col items-center justify-center flex-1 text-sm opacity-70 indent-8"},me=e("br",null,null,-1),_e=e("p",null,"阅读记录将被缓存，如果是在浏览器的无痕模式下，则缓存功能会被禁用。",-1),xe=e("p",null,"搜索内容将被持久化存储在本地，如果是在无痕模式下，退出浏览器后，此次存储将被清空。",-1),we=e("br",null,null,-1),ve=e("p",null,"如果存在阅读记录和搜索记录，你都可以在相应的显示位置找到清除等字样的按钮。",-1),ge=e("br",null,null,-1),ye=e("p",null,"在您访问本站文档后，不再显示该提示。",-1),be=$({__name:"Statistics",setup(p){const w=T(),i=M(null),f=()=>{const s=i.value;window.scrollTo({top:s.clientHeight+s.offsetTop,behavior:"smooth"})},o=M([]),r=M([]);R(async()=>{if(!("caches"in window)||!await caches.has("interface-cache"))return;const t=await(await caches.open("interface-cache")).matchAll();o.value=t.slice(-9).reverse()}),V(o,s=>{r.value=s.map(n=>{console.log(n);const t=decodeURIComponent(n.url),l=t.includes("/docs/")?t.slice(t.lastIndexOf("/docs/"),-3):t.slice(t.indexOf("/projects/"),-3),u=t.slice(t.lastIndexOf("/")+1,-3);return console.log(l,u),{url:l,title:u}})});const d=async(s,n=!1)=>{if(!await caches.has("interface-cache"))return;const l=await caches.open("interface-cache");if(n){await l.keys().then(u=>{u.forEach(m=>l.delete(m))}),o.value=[];return}l.delete(s)};return(s,n)=>{const t=D("router-link");return a(),c("div",{class:"flex flex-col sm:flex-row",ref_key:"ContainerRef",ref:i},[e("section",se,[ne,e("ul",le,[(a(!0),c(k,null,C(h(w),(l,u)=>(a(),c("li",{key:u},[x(t,{to:l.url,class:"flex items-center justify-between p-1 rounded-md cursor-pointer hover:bg-white/40"},{default:b(()=>[e("span",ae,_(l.name),1),e("span",re,_(h(j)(l.mtime).format("YY/MM/DD")),1)]),_:2},1032,["to"])]))),128))]),e("button",{onClick:f,class:"block w-full p-1 mt-2 text-sm text-center border-2 rounded-md border-white/40 glass active:bg-white/40"},"更多")]),r.value.length!=0?(a(),c("section",ce,[ie,e("ul",de,[e("li",null,[(a(!0),c(k,null,C(r.value,(l,u)=>(a(),c("li",{key:u},[x(t,{to:l.url,class:"flex items-center justify-between p-1 rounded-md cursor-pointer hover:bg-white/40"},{default:b(()=>[e("span",ue,_(l.title),1)]),_:2},1032,["to"])]))),128))])]),e("button",{class:"block p-1 ml-auto text-sm text-center border-2 rounded-md border-white/40 glass active:bg-white/40",onClick:n[0]||(n[0]=l=>d("/docs/|/projects/",!0))}," 清空记录 ")])):(a(),c("section",he,[fe,e("div",pe,[e("p",null,[y("为了您的访问体验，本站将进行一些必要的本地存储，本站并不会获取和存储您在本站上的任何操作。更多内容请查看"),x(t,{to:"/projects/我的主页",class:"text-sky-400"},{default:b(()=>[y("我的主页")]),_:1}),y("的存储部分。 ")]),me,_e,xe,we,ve,ge,ye])]))],512)}}}),ke=F('<div class="fixed grid none"><span class="row-span-1"></span><span class="row-span-2"></span><span class="row-span-3"></span><span class="row-span-4"></span><span class="row-span-5"></span></div>',1),Me=$({__name:"DocsCatalog",setup(p){const w=[],i={name:"未分类",children:[],type:"dir",mtime:Date.now(),birthtime:Date.now()};z.children.forEach(o=>{typeof o.children<"u"?w.push(o):i.children.push(o)}),w.push(i);const f=I(null);return R(()=>{var d;const o=(d=f.value)==null?void 0:d.children;if(!o)return;v.set(f.value,{overflow:"hidden"}),v.set(o,{opacity:0,y:30});const r=o.length;for(let s=0;s<r;s++){const n=o[s];v.to(n,{opacity:1,y:0,duration:.3,delay:s*.15,ease:"power2.out"})}v.to(f.value,{overflow:"auto",delay:r*.15})}),(o,r)=>(a(),c("div",null,[x(be,{class:"row-span-2 overflow-y-auto"}),e("div",{class:"grid grid-flow-row-dense grid-cols-1 gap-6 p-4 sm:grid-cols-2 lg:grid-cols-3 auto-rows-auto",ref_key:"Container",ref:f},[ke,(a(),c(k,null,C(w,(d,s)=>x(oe,{dir:d,svg:!0,key:s,class:H([`row-span-${Math.ceil(d.children.length/3)}`,"shadow-lg"])},null,8,["dir","class"])),64))],512)]))}});export{Me as default};
