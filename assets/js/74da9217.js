import{d as $,o,c as n,a as e,u as c,p as Y,r as T,m as D,n as B,q as b,l as E,t as m,v as j,F as k,j as C,e as _,k as v,w as g,E as z,T as A,g as y,x as H,s as M,b as L,y as V,z as F,f as U,A as q}from"./d5e74df0.js";import{D as P}from"./a1a6adc4.js";function I(){const f=["#f07c82","#ee3f4d","#de1c31","#ed556a","#f03752","#e77c8e","#ec9bad","#eeb8c3","#c08eaf","#806d9e","#525288","#61649f","#2b73af","#2376b7","#5698c3","#1772b4","#1781b5","#12aa9c","#45b787","#ffd111","#feba07","#fca106","#f26b1f","#f86b1d"];return f[~~(Math.random()*f.length)]}const G=["view-box"],J=["d"],R=$({__name:"RandomSvg",props:{viewBoxW:{type:Number,default:200},viewBoxH:{type:Number,default:200}},setup(f){const{viewBoxW:w,viewBoxH:r}=f,u=((a=w,x=r)=>{let i=[],l=~~(Math.random()*3)+2;for(let t=0;t<l;t++){const s=Math.floor(Math.random()*a),h=Math.floor(Math.random()*x),p=Math.floor(Math.random()*a),S=Math.floor(Math.random()*x),N=Math.floor(Math.random()*180),O=Math.floor(Math.random()*2),W=Math.floor(Math.random()*2);i.push(`M ${s} ${h} a ${p} ${S} ${N} ${O} ${W} ${s} ${h}`)}return i.join(" ")})();return(a,x)=>(o(),n("svg",{"view-box":`0 0 ${f.viewBoxW} ${f.viewBoxH}`,stroke:"current","stroke-width":"currentWidth",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor","stroke-width":"currentWidth",d:c(u)},null,8,J)],8,G))}}),K={class:"p-4 text-2xl font-bold"},Q={class:"flex flex-col p-2 text-xs text-right opacity-70"},X={class:"w-full max-h-[100%-2rem] pl-2 pr-4 my-4 text-sm basis-7/12 scrollbar"},Z=["onClick"],ee={key:0,class:"absolute inset-0 flex h-full overflow-hidden"},te={class:"block w-24 text-sm leading-6 truncate origin-bottom-left rotate-90 -translate-y-6"},se=$({__name:"DirCard",props:{dir:{type:Object,required:!0},color:{type:String,default:""},svg:{type:Boolean,default:!1}},setup(f){const r=Y(f.dir),d=I(),u={card:{borderColor:"#ffffff55",borderWidth:"3px"},leftWrapper:{backgroundColor:d+"00"},svg:{color:d+"aa"},dirIcon:{color:d+""},docIcon:{backgroundColor:d+"aa"}},a=T(),x=l=>{y.from(l.firstElementChild,{x:"100%",opacity:0,duration:.3,delay:.2}),y.from(l.lastElementChild,{x:"50%",opacity:0,duration:.2})},i=(l,t)=>{y.to(l.firstElementChild,{x:"-100%",opacity:0,duration:.2}),y.to(l.lastElementChild,{x:"-50%",opacity:0,duration:.2,onComplete:t})};return(l,t)=>{const s=D("RouterLink"),h=D("DirCard",!0);return o(),n("div",{class:"relative flex overflow-hidden rounded-lg",style:b(u.card)},[e("div",{class:"relative flex flex-col justify-between basis-5/12",style:b(u.leftWrapper)},[f.svg?(o(),B(R,{key:0,class:"absolute -z-[1] top-0 left-0 w-full h-full stroke-[.5em]",style:b(u.svg)},null,8,["style"])):E("",!0),e("h2",K,m(c(r).name),1),e("div",Q,[e("p",null,m(c(r).children.length)+" 份文件",1),e("p",null,"更新于 "+m(c(j)(c(r).mtime).format("YY/MM/DD")),1),e("p",null,"创建于 "+m(c(j)(c(r).birthtime).format("YY/MM/DD")),1)])],4),e("ul",X,[(o(!0),n(k,null,C(c(r).children,p=>(o(),n("li",{key:p.name},[p.type==="dir"?(o(),n("div",{key:0,class:"p-2 truncate rounded-md cursor-pointer hover:bg-white/40",onClick:S=>a.value=p},[_(c(P),{class:"inline-block w-4 align-text-top stroke-2",style:b(u.dirIcon)},null,8,["style"]),v(" "+m(p.name),1)],8,Z)):(o(),B(s,{key:1,to:p.url,class:"block p-2 truncate rounded-md cursor-pointer hover:bg-white/40"},{default:g(()=>[e("span",{class:"inline-block w-2 mx-1 h-[3px] mb-[.2em] rounded-full",style:b(u.docIcon)},null,4),v(" "+m(p.name),1)]),_:2},1032,["to"]))]))),128))]),_(A,{onEnter:x,onLeave:i},{default:g(()=>[a.value?(o(),n("div",ee,[e("div",{class:"flex-grow-0 flex-shrink-0 h-full pt-2 overflow-hidden text-red-300 cursor-pointer bg-slate-300 dark:bg-slate-700 basis-6 hover:text-red-400",onClick:t[0]||(t[0]=p=>a.value=null)},[e("span",null,[_(c(z),{class:"w-full rotate-180"})]),e("span",te,m(c(r).name),1)]),_(h,{dir:a.value,class:"flex-grow h-full rounded-l-none bg-slate-300 dark:bg-slate-700"},null,8,["dir"])])):E("",!0)]),_:1})],4)}}}),oe={class:"flex-1 p-4"},le=e("h2",{class:"py-2 text-lg"},"最近更新",-1),ae={class:"flex-1 space-y-3"},ne={class:"py-3 text-lg truncate transition-colors duration-300 bg-white/10 group-hover:bg-white/40"},re={class:"text-xs opacity-70"},ce={key:0,class:"flex flex-col flex-1 p-4"},ie=e("h2",{class:"py-2 text-lg"}," 最近阅读 ",-1),de={class:"flex-1"},ue={class:"truncate grow-1"},he={key:1,class:"flex flex-col flex-1 p-4"},fe=e("h2",{class:"py-2 text-lg"},"提示",-1),pe={class:"flex flex-col justify-center flex-1 text-sm opacity-70 indent-8"},me=e("br",null,null,-1),_e=e("p",null,"阅读记录将被缓存，如果是在浏览器的无痕模式下，则缓存功能会被禁用。",-1),xe=e("p",null,"搜索内容将被持久化存储在本地，如果是在无痕模式下，退出浏览器后，此次存储将被清空。",-1),we=e("br",null,null,-1),be=e("p",null,"如果存在阅读记录和搜索记录，你都可以在相应的显示位置找到清除等字样的按钮。",-1),ve=e("br",null,null,-1),ge=e("p",null,"在您访问本站文档后，不再显示该提示。",-1),ye=3,ke=5,Ce=$({__name:"Statistics",setup(f){const w=H(ye),r=M(null),d=()=>{const i=r.value;window.scrollTo({top:i.clientHeight+i.offsetTop,behavior:"smooth"})},u=M([]),a=M([]);L(async()=>{if(!("caches"in window)||!await caches.has("interface-cache"))return;const t=await(await caches.open("interface-cache")).matchAll();u.value=t.slice(-1*ke).reverse()}),V(u,i=>{a.value=i.map(l=>{const t=decodeURIComponent(l.url),s=t.includes("/docs/")?t.slice(t.lastIndexOf("/docs/"),-3):t.slice(t.indexOf("/projects/"),-3),h=t.slice(t.lastIndexOf("/")+1,-3);return{url:s,title:h}})});const x=async(i,l=!1)=>{if(!await caches.has("interface-cache"))return;const s=await caches.open("interface-cache");if(l){await s.keys().then(h=>{h.forEach(p=>s.delete(p))}),u.value=[];return}s.delete(i)};return(i,l)=>{const t=D("router-link");return o(),n("div",{class:"flex flex-col sm:flex-row",ref_key:"ContainerRef",ref:r},[e("section",oe,[le,e("ul",ae,[(o(!0),n(k,null,C(c(w),(s,h)=>(o(),n("li",{key:h,class:"relative"},[_(R,{class:"absolute top-0 left-0 w-full h-full stroke-[.8em]","view-box-w":200,"view-box-h":100,style:b({color:c(I)()+"aa"})},null,8,["style"]),_(t,{to:s.url,class:"relative z-10 items-center justify-between block py-4 text-center border rounded-md shadow-md cursor-pointer border-white/40 group"},{default:g(()=>[e("p",ne,m(s.name),1),e("p",re,m(c(j)(s.mtime).format("YYYY年MM月DD日")),1)]),_:2},1032,["to"])]))),128))]),e("button",{onClick:d,class:"block w-full p-1 mt-3 text-sm text-center border-2 rounded-md shadow-md border-white/40 glass active:bg-white/40"},"更多")]),a.value.length!=0?(o(),n("section",ce,[ie,e("ul",de,[e("li",null,[(o(!0),n(k,null,C(a.value,(s,h)=>(o(),n("li",{key:h},[_(t,{to:s.url,class:"flex items-center justify-between p-1 rounded-md cursor-pointer hover:bg-white/40"},{default:g(()=>[e("span",ue,m(s.title),1)]),_:2},1032,["to"])]))),128))])]),e("button",{class:"block p-1 ml-auto text-sm text-center border-2 rounded-md border-white/40 glass active:bg-white/40",onClick:l[0]||(l[0]=s=>x("/docs/|/projects/",!0))}," 清空记录 ")])):(o(),n("section",he,[fe,e("div",pe,[e("p",null,[v("为了您的访问体验，本站将进行一些必要的本地存储，本站并不会获取和存储您在本站上的任何操作。更多内容请查看"),_(t,{to:"/projects/我的主页",class:"text-sky-400"},{default:g(()=>[v("我的主页")]),_:1}),v("的存储部分。 ")]),me,_e,xe,we,be,ve,ge])]))],512)}}}),$e={class:"grid grid-flow-row-dense grid-cols-1 gap-6 p-4 sm:grid-cols-2 lg:grid-cols-3 auto-rows-auto"},Me=U('<div class="fixed grid none"><span class="row-span-1"></span><span class="row-span-2"></span><span class="row-span-3"></span><span class="row-span-4"></span><span class="row-span-5"></span></div>',1),Se=$({__name:"DocsCatalog",setup(f){const w=[],r={name:"未分类",children:[],type:"dir",mtime:Date.now(),birthtime:Date.now()};return F.children.forEach(d=>{typeof d.children<"u"?w.push(d):r.children.push(d)}),w.push(r),(d,u)=>(o(),n("div",null,[_(Ce,{class:"row-span-2 overflow-y-auto"}),e("div",$e,[(o(),n(k,null,C(w,(a,x)=>_(se,{dir:a,svg:!0,key:x,class:q([`row-span-${Math.ceil(a.children.length/3)}`,"shadow-lg"])},null,8,["dir","class"])),64))]),Me]))}});export{Se as default};
